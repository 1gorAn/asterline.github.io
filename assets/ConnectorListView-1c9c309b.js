import{_ as w,r as o,o as f,c as C,w as e,b as n,d as p,t as u,e as c,f as F,A as b,g as N,h as S,F as B}from"./index-1482ff37.js";const L={name:"ConnectorItem",props:{number:Number,days:Number,address:String,sync:String,version:String,removeFunc:Function},data(){return{dialog:null}},methods:{removeConnector(){this.dialog=!1,this.$props.removeFunc(this.$props.number)}}},I=p("br",null,null,-1),A=p("br",null,null,-1),$=p("br",null,null,-1);function D(a,r,t,x,i,g){const s=o("v-col"),d=o("v-btn"),h=o("v-card-text"),m=o("v-cols"),_=o("v-row"),l=o("v-container"),y=o("v-card-actions"),V=o("v-card"),k=o("v-dialog");return f(),C(l,null,{default:e(()=>[n(_,null,{default:e(()=>[n(s,{cols:"7"},{default:e(()=>[p("b",null,"Коннектор "+u(t.number),1)]),_:1}),n(s,{cols:"5"},{default:e(()=>[n(_,null,{default:e(()=>[n(s,{cols:"6"},{default:e(()=>[n(d,{"prepend-icon":"mdi-circle-edit-outline"},{default:e(()=>[c("Изменить")]),_:1})]),_:1}),n(s,{cols:"6"},{default:e(()=>[n(k,{modelValue:i.dialog,"onUpdate:modelValue":r[1]||(r[1]=v=>i.dialog=v),width:"auto"},{activator:e(({props:v})=>[n(d,F(v,{"prepend-icon":"mdi-delete-circle-outline"}),{default:e(()=>[c("Удалить")]),_:2},1040)]),default:e(()=>[n(V,null,{default:e(()=>[n(h,null,{default:e(()=>[c(" У вас осталось еще "+u(t.days)+" дн. Подтвердите удаление, восстановление лицензии невозможно ",1)]),_:1}),n(y,null,{default:e(()=>[n(l,null,{default:e(()=>[n(_,null,{default:e(()=>[n(m,{cols:"6"},{default:e(()=>[n(d,{color:"primary",onClick:r[0]||(r[0]=v=>i.dialog=!1)},{default:e(()=>[c("Отмена")]),_:1})]),_:1}),n(m,{cols:"6"},{default:e(()=>[n(d,{color:"danger",onClick:g.removeConnector},{default:e(()=>[c("Удалить")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),n(_,null,{default:e(()=>[n(s,{cols:"12"},{default:e(()=>[c(" Адрес коннектора "+u(t.address),1),I,c(" Версия "+u(t.version),1),A,c(" Подписка до 30.08.2023 (осталось "+u(t.days)+" дн.) ",1),$,c(" Дата последней синхронизации с коннектором "+u(t.sync),1)]),_:1})]),_:1})]),_:1})}const E=w(L,[["render",D]]),G={name:"ConnectorListView",components:{ConnectorItem:E},data(){return{items:[]}},methods:{getConnectors(){b.connectorGetList().then(a=>{this.items=a.data.data})},removeConnector(a){b.connectorRemove(a).then(r=>{this.items=[...this.items].filter(t=>t.id!==a)}).catch(r=>{this.$notify({title:error.message,type:"error"})})}},async mounted(){this.getConnectors()}};function P(a,r,t,x,i,g){const s=o("ConnectorItem"),d=o("v-card"),h=o("v-col"),m=o("v-row"),_=o("v-container");return f(),C(_,null,{default:e(()=>[n(m,null,{default:e(()=>[(f(!0),N(B,null,S(i.items,(l,y)=>(f(),C(h,{key:l.id,cols:"6"},{default:e(()=>[n(d,null,{default:e(()=>[n(s,{number:l.id,address:l.address,version:l.version,sync:l.last_sync,days:120,"remove-func":g.removeConnector},null,8,["number","address","version","sync","remove-func"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})}const T=w(G,[["render",P]]);export{T as default};
